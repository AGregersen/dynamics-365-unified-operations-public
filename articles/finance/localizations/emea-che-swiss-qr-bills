---
# required metadata

title: Swiss QR-bills
description: This article explains how to generate QR-bills and process incoming QR-slips in Microsoft Dynamics 365 for Finance and Operations.
author: v-lenest
manager: AnnBe
ms.date: 03/09/2020
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 

# optional metadata

ms.search.form: 
audience: Application User
# ms.devlang: 
ms.reviewer: kfend
ms.search.scope: Core, Operations
# ms.tgt_pltfrm: 
# ms.custom: 
ms.search.region: Switzerland
# ms.search.industry: 
ms.author: v-lenest
ms.search.validFrom: 2020-06-01
ms.dyn365.ops.version: 10.0.9

---

# Swiss QR-bills

[!include [banner](../includes/banner.md)]


## Summary

Starting from July 2020 is is mandatory to process QR-bills (QR-slips) which should be issued in addition to the invoice. This article explains how to generate QR-bills and process incoming QR-slips in Microsoft Dynamics 365 for Finance and Operations.

# Prerequisites and setup


## Feature activation

To enable the QR-bill functionality, it is required to activate following options in the Feature management module:

- Configurable payment ID
- (Switzerland) QR-bills
Upon activation, Swiss QR-bill functionality is available for extended set of countries: CH, DE, AT, FR, IT (depending on the address of the legal entity).

## GER configurations

Latest versions of the following GER configurations should be imported from LCS repository:

- Swiss QR-Bill text
- Swiss QR-Bill Structured information
- ISO20022 Credit transfer (CH)
- ISO20022 pain.002
- ISO20022 Camt.054

All required model and model mapping configurations would be imported automatically.

## Company Bank account setup

On the Bank account form, it is possible to specify the QR-IBAN field. QR-IBAN could be used simultaneously with ordinary IBAN and has similar validations in the system.

## Cash discount and Tax codes descriptions setup

Cash discount and Tax codes used should have the QR-bill descriptions populated which would be used for QR-bill printing.

## Legal entity Registration Id setup

To correctly populate the UID number on the generated QR slip, the value should be filled in in the Registration Id section should be filled in on the Legal entity setup with the Registration category corresponding to the VAT Id.

## Accounts Receivable Setup

## Payment Id

On this form you can configure the structure of the Payment Id which would be applied during the generation of the outgoing QR slips from AR. Payment Id length is expected to be set up to 27 digits and generating the check digit using the Modulo11 algorithm.
Non-digit symbols are excluded from the Payment Id upon execution, however it is recommended that number sequences used for Customer account and Invoice to have digits only.

The Payment Id type which would be applied on the invoice could be defaulted on the following level hierarchy.
- AR parameters, tab Ledger and sales tax
- Customer groups
- Customer account, tab Payment Defaults
- Method of payment, tab Payment control

## Methods of payment – customers

Method of payment should be set up on the customer accounts which would be using the QR-bills to define the details of the company bank account to which QR slip would be issued. For processing the incoming payments in camt.054 format, the GER import configuration should be set up.

## Customer account

It is required that the default Method of payment is selected, and the Payment Id type should be filled in if not specified in the default setup for customer groups of Account Receivable parameters.

In the Associated payment attachment field group, a new type QR-bill is added. When selected, the QR slip would be printed when the document of dedicated type is printed.


## Giro report processing group
The way how the “Billing information” section is filled on QR slip is controlled by the settings of the Giro report processing groups. If necessary, it is possible to configure different structure of this section on the QR bill in GER and set up to have different structure to be used in

- Account code – ability to specify the general setting in the company, specific format dedicated for customer groups or for the specific customer account
- Customer relation – value of specific Customer account or Customer group if applicable
- QR-Bill information – select the GER format configuration responsible for filling the Billing information
- Print scissors symbol – define whether the scissors symbol would be printed on the report (could be important when choosing whether to send prited or electronic version of the QR-slip )

## Accounts Payable setup

## Methods of payment – vendors

In the Method of payment-vendors it is required to specify the Bank account associated, select the required GER configurations for the export and import for payment file processing, and set up Payment specification. A new Payment specification parameter value is available, Tp3.QR for payments corresponding to the incoming QR-slips. In addition to Payment specification setup, a specific option is also available on the Vendor bank account for redefining the Specification parameter – see Vendor bank account setup.

Payment ID should be activated on the Payment attributes tab in order to inherit the Payment Id during the payment proposal with QR-bills.

## Return format error codes and Return format status mapping

If pain.002 is expected to be used as a return file format, the Return format error codes and Return format status mapping is expected to be set up. For more information, see also the documentation for ISO20022 pain.002 functionality.


##Vendor account

Standard setup of the vendor account for ISO20022 payments is expected. For more info, see also Set up vendors and vendor bank accounts for ISO20022 credit transfers (https://docs.microsoft.com/en-us/dynamics365/finance/localizations/tasks/set-up-vendor-iso20022-credit-transfers).

## Vendor bank account

It is required to populate the QR-IBAN field in the Vendor bank accounts. Other fields are expected to be populated as per normal payment procedure for payment Type 3 in Switzerland.

Additional option added for selection of the Payment specification parameter directly on the vendor bank account. When filled in, this value would be taken with priority higher than the payment specification of the Method of payment during the credit transfer file generation.

# Accounts receivable process

## Generate the QR-slips

To generate the QR-slip for the document (i.e. customer invoice), run the document printing (i.e. invoice View-Original), and the QR-slip will be generated as an additional report automatically. After that, the QR-bill could be exported to PDF and printed or sent electronically.

Functionality supported for:
- Sales order invoices
- Free text invoices
- Project invoices
- Interest notes
- Collection letters
- Account statement
- The Payment Id value is stored when invoice is posted in Customer transaction as well as on the Invoice journal.

## Import payments in camt.054 format
To the bank statement in camt.054 format from the bank, open the Customer payment journal line and run the Import payment function. The 27-digit long reference is expected in the Ref tag (in the RmtInf section) of the file. After the import, the payment transactions would be created and settled with customer transactions based on Payment Id value. For more information, see also Import the camt.054 credit advice file into the Customer payment journal (https://docs.microsoft.com/en-us/dynamics365/finance/localizations/emea-iso20022-file-formats).

# Accounts payable process

The scope of supported functionality covers the process of manual import of the QR code values into the input dialog which could be achieved by scanning devices transmitting the text value of the QR-code. The structure of the information from QR-code should follow the standards available at the SIX group website at the moment of the release. In case of any derivation from the structure in the information encrypted in QR code or any format changes required to follow the device-specific behavior, this could be configured using the Generic Electronic Reporting (GER) module without code modifications.

## Import QR bills

It is possible to import the QR bills either into the Invoice journal, or into Pending vendor invoice destinations.

To import QR-bills into the Invoice journal, run the Import QR-Bill function available in the Invoice journal lines form.

On the importing dialog, in the QR bill field, the name of the GER format configuration is shown. In case of different (derived) format is expected to be executed, it could be selected on the dialog. Enter the QR code value in the Plain text of the QR-Bill field and click Ok.

On the next QR-Bill form, parsed values of the QR bill are presented on the QR-Bill tab. On the General tab, the values of the recognized Vendor, bank account, amount and other details which would be imported in the system. After clicking Ok, the Invoice journal line would be created. In case this QR slip was imported earlier, user would be notified by a warning message. The info of imported QR bill is stored and available for review on the Imported QR bills form.

For invoices associates with Purchase orders, it is possible to create Pending vendor invoice headers based on QR bill information. To import the QR-bill, run the Import QR-bill function from the Pending vendor invoices form, tab Process. Insertion of the QR code and record review and importing is similar to the described above.

It is also possible to import the QR bill when the vendor invoice is opened from the Purchase order (Generate invoice function, on the opened form menu Process - Import QR-bill). Importing procedure is same as Pending vendor invoice, association with the purchase order would be inherited automatically.

To process the QR bill without predefined destination or to a custom destination, a special option in Periodic Tasks is available in Accounts payable periodic tasks. In this case, it would be required to select the destination manually.

When the Plain text of the QR Bill left blank, it is possible to run import from the text file, located i.e. on the SharePoint folder based on the setup of the Electronic Reporting source.

After the invoice is posted, the vendor transaction with imported Payment Id would be available for settlement in the payment journal.

## Payment files processing

Create Vendor payment journal lines using the Payment proposal function. For more details, see also the link (https://docs.microsoft.com/en-us/dynamics365/finance/localizations/tasks/create-export-vendor-payments-iso20022-payment-format).

For QR-bill related payments, the Credit transfer file would be generated based on the Payment Id value, retrieved from the QR code.

Importing of the pain.002 and camt.054 files are also available from the Payment transfers form. For more details, see also Import the pain.002 status return or camt.054 debit advice files into the Vendor payment journal (https://docs.microsoft.com/en-us/dynamics365/finance/localizations/emea-iso20022-file-formats).
